<div class="bg-white">
  <div class="mx-auto max-w-7xl">
    <div class="p-6">
      <h2 class="mb-6 text-xl font-bold text-gray-800 lg:text-2xl">撮影スポットマップ</h2>
      <div id="map" class="h-72 md:h-600"></div>
    </div>
    <div class="p-6">
      <div class="mb-6 flex items-center justify-between">
        <h2 class="text-xl font-bold text-gray-800 lg:text-2xl">新着投稿</h2>
        <a href="#" class="inline-block rounded-lg border bg-white px-4 py-2 text-center text-sm font-semibold text-gray-500 outline-none ring-indigo-300 transition duration-100 hover:bg-gray-100 focus-visible:ring active:bg-gray-200 md:px-8 md:py-3 md:text-base">さらに表示</a>
      </div>
      <div class="grid gap-x-4 gap-y-8 sm:grid-cols-2 md:gap-x-6 lg:grid-cols-3 xl:grid-cols-4">
        <% @posts.each do |post| %>
          <div>
            <%= link_to post_path(post.id), class: "group relative mb-2 block h-80 overflow-hidden rounded-lg bg-gray-100 lg:mb-3" do %>
              <% if post.image.attached? %>
                <%= image_tag post.image, loading: "lazy", class: "h-full w-full object-cover object-center transition duration-200 group-hover:scale-105" %>
              <% end %>
            <% end %>
            <%= link_to post.title, "#", class: "hover:gray-800 mb-1 text-gray-800 font-medium transition duration-100 lg:text-lg" %>
          </div>
        <% end %>
      </div>
    </div>
  </div>
</div>

<script>
  // Initialize and add the map
  function initMap() {
    // The location of Uluru
    const uluru = { lat: -25.344, lng: 131.031 };
    // The map, centered at Uluru
    const map = new google.maps.Map(document.getElementById("map"), {
      zoom: 4,
      center: uluru,
    });
    // The marker, positioned at Uluru
    const marker = new google.maps.Marker({
      position: uluru,
      map: map,
    });
  }
  window.initMap = initMap;
</script>

<script async
    src="https://maps.googleapis.com/maps/api/js?key=<%= ENV["GOOGLE_MAP_API_KEY"] %>&callback=initMap">
</script>

<script src="https://unpkg.com/@googlemaps/markerclusterer/dist/index.min.js"></script>
