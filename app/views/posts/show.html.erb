<div class="bg-gray-100 p-4">
  <div class="bg-white m-auto max-w-7xl">
    <div class="bg-black bg-opacity-80 p-6 grid gap-6 grid-cols-1 relative sm:grid-cols-2">
      <div class="flex justify-center items-center">
        <% if @post.image.present? %>
          <%= image_tag @post.image.variant(resize_to_limit: [1000, 1000]), class:"h-auto max-w-full shadow-lg object-contain max-h-500" %>
        <% end %>
      </div>
      <div class="flex justify-center items-center">
        <div id="map" class="w-500 h-96 md:h-500 rounded-lg shadow-lg max-w-full" data-latitude=<%= @post.latitude %> data-longitude=<%= @post.longitude %>></div>
      </div>
      <div data-dial-init class="absolute top-4 right-4">
        <button type="button" data-collapse-toggle="speed-dial-menu-dropdown" aria-controls="speed-dial-menu-dropdown" aria-expanded="false" class="flex items-center justify-center ml-auto hover:opacity-60">
          <svg aria-hidden="true" class="w-8 h-8 fill-white" fill="currentColor" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M6 10a2 2 0 11-4 0 2 2 0 014 0zM12 10a2 2 0 11-4 0 2 2 0 014 0zM16 12a2 2 0 100-4 2 2 0 000 4z"></path></svg>
          <span class="sr-only">Open actions menu</span>
        </button>
        <div id="speed-dial-menu-dropdown" class="flex flex-col justify-end hidden py-1 mb-4 space-y-2 bg-white border border-gray-100 rounded-lg shadow-sm">
          <ul class="text-sm text-gray-500">
            <li>
              <%= link_to "編集", edit_post_path, class: "flex items-center px-5 py-2 hover:bg-gray-100 hover:text-gray-900 text-sm font-medium" %>
              <%= button_to "削除", @post, method: :delete, data: { turbo_confirm: '本当に削除しますか?' }, class: "flex items-center px-5 py-2 hover:bg-gray-100 hover:text-gray-900 text-sm font-medium" %>
            </li>
          </ul>
        </div>
      </div>
    </div>
    <div class="bg-white">
      <div class="border-solid border-b border-gray-100 p-3 flex gap-2 items-center">
        <% if user_signed_in? %>
          <% if @like.present? %>
            <%= link_to post_like_path(@post), data: { turbo_method: :delete } do %>
              <svg class="w-8 h-8 fill-current stroke-current"><use xlink:href="#heart"></use></svg>
            <% end %>
          <% else %>
            <%= link_to post_likes_path(@post), data: { turbo_method: :post } do %>
              <svg class="w-8 h-8 fill-none stroke-current"><use xlink:href="#heart"></use></svg>
            <% end %>
          <% end %>
          <% if @bookmark.present? %>
            <%= link_to post_bookmark_path(@post), data: { turbo_method: :delete } do %>
              <svg class="w-8 h-8 fill-current stroke-current"><use xlink:href="#bookmark"></use></svg>
            <% end %>
          <% else %>
            <%= link_to post_bookmarks_path(@post), data: { turbo_method: :post } do %>
              <svg class="w-8 h-8 fill-none stroke-current"><use xlink:href="#bookmark"></use></svg>
            <% end %>
          <% end %>
        <% else %>
          <svg class="w-8 h-8 fill-none stroke-current"><use xlink:href="#heart"></use></svg>
          <svg class="w-8 h-8 fill-none stroke-current"><use xlink:href="#bookmark"></use></svg>
        <% end %>
      </div>
      <div class="border-solid border-b border-gray-100 p-3 flex gap-2 items-center">
        <svg class="w-12 h-12" fill="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" aria-hidden="true">
          <path clip-rule="evenodd" fill-rule="evenodd" d="M18.685 19.097A9.723 9.723 0 0021.75 12c0-5.385-4.365-9.75-9.75-9.75S2.25 6.615 2.25 12a9.723 9.723 0 003.065 7.097A9.716 9.716 0 0012 21.75a9.716 9.716 0 006.685-2.653zm-12.54-1.285A7.486 7.486 0 0112 15a7.486 7.486 0 015.855 2.812A8.224 8.224 0 0112 20.25a8.224 8.224 0 01-5.855-2.438zM15.75 9a3.75 3.75 0 11-7.5 0 3.75 3.75 0 017.5 0z"></path>
        </svg>
        <h3 class="text-xl font-bold"><%= @post.user.profile.name %></h3>
        <%= render "shared/follow", user_id: @post.user.id %>
      </div>
      <div class="border-solid border-b border-gray-100 p-3">
        <div class="pb-3">
          <p class="pb-2"><span class="font-bold">撮影スポット: </span><%= @post.location %></p>
          <p><span class="font-bold">撮影日: </span><%= l @post.created_at, format: :long %></p>
          <div class="flex gap-3">
            <% @post.categories.each do |category| %>
              <div class="border border-gray-200 rounded-md px-3 py-1">
                <p class="text-gray-700"><%= category.name %></p>
              </div>
            <% end %>
          </div>
        </div>
        <p><%= @post.description %></p>
      </div>
    </div>
  </div>
</div>
<svg class="hidden" xmlns="http://www.w3.org/2000/svg" aria-hidden="true">
  <symbol viewBox="0 0 20 20" id="heart">
    <path d="M9.653 16.915l-.005-.003-.019-.01a20.759 20.759 0 01-1.162-.682 22.045 22.045 0 01-2.582-1.9C4.045 12.733 2 10.352 2 7.5a4.5 4.5 0 018-2.828A4.5 4.5 0 0118 7.5c0 2.852-2.044 5.233-3.885 6.82a22.049 22.049 0 01-3.744 2.582l-.019.01-.005.003h-.002a.739.739 0 01-.69.001l-.002-.001z"></path>
  </symbol>
</svg>
<svg class="hidden" xmlns="http://www.w3.org/2000/svg" aria-hidden="true">
  <symbol viewBox="0 0 20 20" id="bookmark">
    <path clip-rule="evenodd" fill-rule="evenodd" d="M10 2c-1.716 0-3.408.106-5.07.31C3.806 2.45 3 3.414 3 4.517V17.25a.75.75 0 001.075.676L10 15.082l5.925 2.844A.75.75 0 0017 17.25V4.517c0-1.103-.806-2.068-1.93-2.207A41.403 41.403 0 0010 2z"></path>
  </symbol>
</svg>
